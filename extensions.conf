[globals]
globalSoundpath = /home/advrobot/robocall/sounds
globalSoundEngpath = /home/advrobot/robocall/sounds_en



[context_001]

; 播打給客房通知行李抵達, Asterisk分機100
exten = 100,1,Answer()
 same = n,Set(robot1_subfunction=1)
 same = n,Wait(1)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,Hangup()
; 
; 用戶按了0, Asterisk分機0
;exten = 0,1,NoOp()
; same = n,Set(soundpath=/home/advrobot/robocall/sounds)
; same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
; same = n,Set(robot1_pw1=${pw1:0:1})
; same = n,Set(robot1_pw2=${pw1:1:1})
; same = n,Set(robot1_pw3=${pw1:2:1})
; same = n,Set(robot1_pw4=${pw1:3:1})
;Robot1 picup
; same = n,NoOp(Robot1 pickup)
; 親愛的貴賓您好我是和寶 您的行李已經送到房口囉 快來領取吧
; same = n,Playback(${soundpath}/tts1)
; same = n,WaitExten(1)
; 您設定的密碼為
; same = n,Playback(${soundpath}/pwPrompt)
; same = n,Playback(${soundpath}/${robot1_pw1})
; same = n,Playback(${soundpath}/${robot1_pw2})
; same = n,Playback(${soundpath}/${robot1_pw3})
; same = n,Playback(${soundpath}/${robot1_pw4})
; same = n,WaitExten(3)

; Dear guest, my name is HeBao. I just finished delivering your luggage. Please come and get it by door
; same = n,Playback(${soundpath_en}/tts1)
; same = n,WaitExten(1)
; Your password is
; same = n,Playback(${soundpath_en}/pwPrompt)
; same = n,Playback(${soundpath_en}/${robot1_pw1})
; same = n,Playback(${soundpath_en}/${robot1_pw2})
; same = n,Playback(${soundpath_en}/${robot1_pw3})
; same = n,Playback(${soundpath_en}/${robot1_pw4})
; same = n,WaitExten(3)
;
; same = n,Hangup()


; 請求移車 (remove_car_req) Asterisk分機200
exten = 200,1,Answer()
 same = n,Set(robot1_subfunction=2)
; same = n,Wait(3)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
; // 前台沒人接... 掛掉 上層重撥
 same = n,Hangup()



; // 前台按了1, Asterisk分機1
;exten = 1,1,NoOp()
; same = n,Set(soundpath=/home/advrobot/robocall/sounds)
; same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
; same = n,NoOp(Robot1 pickup)
; same = n,Wait(1)
; // 設定樓層, 目前房號 目的地YYYY號房
; same = n,Set(robot1_cur_room1=${currentRoomId1:0:1})
; same = n,Set(robot1_cur_room2=${currentRoomId1:1:1})
; same = n,Set(robot1_cur_room3=${currentRoomId1:2:1})
; same = n,Set(robot1_cur_room4=${currentRoomId1:3:1})
; same = n,Set(floor=${currentRoomId1:1:1})
; 機器人在X樓 
; same = n,Playback(${soundpath}/robot_is_at)
; same = n,Playback(${soundpath}/${floor})
; same = n,Playback(${soundpath}/floor)
; XXXX號房
; same = n,Playback(${soundpath}/${d1})
; same = n,Playback(${soundpath}/${robot1_cur_room2})
; same = n,Playback(${soundpath}/${robot1_cur_room3})
; same = n,Playback(${soundpath}/${robot1_cur_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
; // 設定目的房號
; same = n,Set(robot1_tar_room1=${targetRoomId1:0:1})
; same = n,Set(robot1_tar_room2=${targetRoomId1:1:1})
; same = n,Set(robot1_tar_room3=${targetRoomId1:2:1})
; same = n,Set(robot1_tar_room4=${targetRoomId1:3:1})
; 目的地YYYY房號
; same = n,Playback(${soundpath}/target)
; same = n,Playback(${soundpath}/${d1})
; same = n,Playback(${soundpath}/${robot1_tar_room2})
; same = n,Playback(${soundpath}/${robot1_tar_room3})
; same = n,Playback(${soundpath}/${robot1_tar_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
;
; 請通知客房阿姨移動工作車，謝謝
; same = n,Playback(${soundpath}/plz_notice_to_remove_car)
; same = n,Wait(3)
; same = n,Hangup()
;
; test local channel
;exten = 55,1,NoOp()
; same = n,Dial(DAHDI/1/32)
; same = n,Wait(10)
; same = n,Hangup()
;
;exten = 66,1,NoOp()
; same = n,Dial(DAHDI/4/26)
; same = n,Wait(10)
; same = n,Hangup()
;

;300, box not closed
exten = 300,1,Answer()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(robot1_subfunction=3)
 ;same = n,Set(subfunction=0)

 same = n,WaitExten(1)

; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)

; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)

; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)

; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)

 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)

  same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,Hangup()


;exten = 2,1,Answer()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 ;same = n,wait(1)
 ;same = n,NoOp(${globalSoundpath})
 ;same = n,wait(1)
 ;same = n,Set(cntxt001_d1=${Room1Id:0:1})
 ;same = n,Set(cntxt001_d2=${Room1Id:1:1})
 ;same = n,Set(cntxt001_d3=${Room1Id:2:1})
 ;same = n,Set(cntxt001_d4=${Room1Id:3:1})
 ;same = n,NoOp(${cntxt001_d1})
 ;same = n,NoOp(${cntxt001_d2})
 ;same = n,NoOp(${cntxt001_d3})
 ;same = n,NoOp(${cntxt001_d4})
 ;same = n,Set(rid=${robot1Id})
 ;same = n,NoOp(Robot1 pickup)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,Playback(${globalSoundpath}/${cntxt001_d1})
 ;same = n,Playback(${globalSoundpath}/${cntxt001_d2})
 ;same = n,Playback(${globalSoundpath}/${cntxt001_d3})
 ;same = n,Playback(${globalSoundpath}/${cntxt001_d4})
 ;same = n,playback(${globalSoundpath}/box_not_closed2)
 ;same = n,Hangup()


 ;400, delivery over time
exten = 400,1,Answer()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(robot1_subfunction=4)
 same = n,WaitExten(1)

; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)

; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)

; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)

; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,Hangup()


exten = 0,1,Answer()
 ;same = n,wait(1)
 ;same = n,wait(1)
 ;same = n,NoOp(Robot1 pickup)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,wait(1)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,wait(1)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,Hangup()
 ;same = n,Goto(subfunction,0,1)
 ;same = n,NoOp(${})
 ;same = n,GotoIf($["${subfunction}" = "1"]? subfunctions,0,1 :subfunctions,1,1)
 same = 2,GotoIf($["${robot1_subfunction}" = "1"]? 6)
 same = 3,GotoIf($["${robot1_subfunction}" = "2"]? 7)
 same = 4,GotoIf($["${robot1_subfunction}" = "3"]? 8)
 same = 5,GotoIf($["${robot1_subfunction}" = "4"]? 9)
 ;same = 3,Goto(subfunction,1,1)
 ;context,exten,priority
 same = 6,Goto(robot1_subfunctions,1,1)
 same = 7,Goto(robot1_subfunctions,2,1)
 same = 8,Goto(robot1_subfunctions,3,1)
 same = 9,Goto(robot1_subfunctions,4,1)

 same = n,Hangup()
 ;same = n,GotoIf($["${subfunction}"="0"]? sub1)
 ;same = n(sub1),Goto(subfunction,0,1)
 ;same = n,Hangup()
 ;same = n,GotoIf($["${subfunction}"="0"]? sub2)
 ;same = n(sub2),Goto(subfunction,1,1)
 ;same = n,Hangup()
 ;same = n(exchange1),Goto(subfunction,0,1)



[context_002]

; 播打給客房通知行李抵達, Asterisk分機100
exten = 100,1,Answer()
 same = n,Wait(1)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 same = n,Set(robot2_subfunction=1)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,WaitExten(1)
; 您的行李已送達, 請按0
 same = n,Background(${soundpath}/tts0)
;
 same = n,WaitExten(1)
; Your luggage is delivered, please press 0
 same = n,Background(${soundpath_en}/tts0)
;
 same = n,Hangup()
; 
; 用戶按了0, Asterisk分機0
;exten = 0,1,NoOp()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 ;same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 ;same = n,Set(robot2_pw1=${pw2:0:1})
 ;same = n,Set(robot2_pw2=${pw2:1:1})
 ;same = n,Set(robot2_pw3=${pw2:2:1})
 ;same = n,Set(robot2_pw4=${pw2:3:1})
;
 ;same = n,NoOp(Robot2 pickup)
; 親愛的貴賓您好我是和寶 您的行李已經送到房口囉 快來領取吧
 ;same = n,Playback(${soundpath}/tts1)
 ;same = n,WaitExten(1)
; 您設定的密碼為
 ;same = n,Playback(${soundpath}/pwPrompt)
 ;same = n,Playback(${soundpath}/${robot2_pw1})
 ;same = n,Playback(${soundpath}/${robot2_pw2})
 ;same = n,Playback(${soundpath}/${robot2_pw3})
 ;same = n,Playback(${soundpath}/${robot2_pw4})
 ;same = n,WaitExten(3)

; Dear guest, my name is HeBao. I just finished delivering your luggage. Please come and get it by door
 ;same = n,Playback(${soundpath_en}/tts1)
 ;same = n,WaitExten(1)
; Your password is
 ;same = n,Playback(${soundpath_en}/pwPrompt)
 ;same = n,Playback(${soundpath_en}/${robot2_pw1})
 ;same = n,Playback(${soundpath_en}/${robot2_pw2})
 ;same = n,Playback(${soundpath_en}/${robot2_pw3})
 ;same = n,Playback(${soundpath_en}/${robot2_pw4})
 ;same = n,WaitExten(3)
;
 ;same = n,Hangup()


; 請求移車 (remove_car_req) Asterisk分機200
exten = 200,1,Answer()
; same = n,Wait(3)
 same = n,Set(robot2_subfunction=2)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
 
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
 same = n,WaitExten(1)
; 機器人無法前進, 請按0
 same = n,Background(${soundpath}/robot_failed_to_move_plz_press)
;
; // 前台沒人接... 掛掉 上層重撥
 same = n,Hangup()



; // 前台按了1, Asterisk分機1
;exten = 1,1,NoOp()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 ;same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 ;same = n,NoOp(Robot2 pickup)
; same = n,Wait(1)
; // 設定樓層, 目前房號 目的地YYYY號房
 ;same = n,Set(robot2_cur_room1=${currentRoomId2:0:1})
 ;same = n,Set(robot2_cur_room2=${currentRoomId2:1:1})
 ;same = n,Set(robot2_cur_room3=${currentRoomId2:2:1})
 ;same = n,Set(robot2_cur_room4=${currentRoomId2:3:1})
 ;same = n,Set(floor=${currentRoomId2:1:1})
; 機器人在X樓 
 ;same = n,Playback(${soundpath}/robot_is_at)
 ;same = n,Playback(${soundpath}/${floor})
 ;same = n,Playback(${soundpath}/floor)
; XXXX號房
; same = n,Playback(${soundpath}/${d1})
 ;same = n,Playback(${soundpath}/${robot2_cur_room2})
 ;same = n,Playback(${soundpath}/${robot2_cur_room3})
 ;same = n,Playback(${soundpath}/${robot2_cur_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
; // 設定目的房號
 ;same = n,Set(robot2_tar_room1=${targetRoomId2:0:1})
 ;same = n,Set(robot2_tar_room2=${targetRoomId2:1:1})
 ;same = n,Set(robot2_tar_room3=${targetRoomId2:2:1})
 ;same = n,Set(robot2_tar_room4=${targetRoomId2:3:1})
; 目的地YYYY房號
 ;same = n,Playback(${soundpath}/target)
; same = n,Playback(${soundpath}/${d1})
 ;same = n,Playback(${soundpath}/${robot2_tar_room2})
 ;same = n,Playback(${soundpath}/${robot2_tar_room3})
 ;same = n,Playback(${soundpath}/${robot2_tar_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
;
; 請通知客房阿姨移動工作車，謝謝
 ;same = n,Playback(${soundpath}/plz_notice_to_remove_car)
 ;same = n,Wait(3)
 ;same = n,Hangup()
;
; test local channel
;exten = 55,1,NoOp()
; same = n,Dial(DAHDI/1/32)
; same = n,Wait(10)
; same = n,Hangup()
;
;exten = 66,1,NoOp()
; same = n,Dial(DAHDI/4/26)
; same = n,Wait(10)
; same = n,Hangup()
;


;300, box not closed

exten = 300,1,Answer()
 same = n,Set(robot2_subfunction=3)
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)

 same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)

  same = n,WaitExten(1)
; 機器人箱體未關閉, 請按0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,WaitExten(1)
; box door not closed, please press 0
 same = n,Background(${globalSoundpath}/box_not_closed_reminder)
;
 same = n,Hangup()

;exten = 2,1,Answer()
  ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 ;same = n,wait(1)
 ;same = n,NoOp(${globalSoundpath})
 ;same = n,wait(1)
 ;same = n,Set(robot2_room1=${Room2Id:0:1})
 ;same = n,Set(robot2_room2=${Room2Id:1:1})
 ;same = n,Set(robot2_room3=${Room2Id:2:1})
 ;same = n,Set(robot2_room4=${Room2Id:3:1})
 ;same = n,NoOp(${robot2_room1})
 ;same = n,NoOp(${robot2_room2})
 ;same = n,NoOp(${robot2_room3})
 ;same = n,NoOp(${robot2_room4})
 ;same = n,Set(rid=${robot2Id})
 ;same = n,NoOp(Robot2 pickup)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,Playback(${globalSoundpath}/${robot2_room1})
 ;same = n,Playback(${globalSoundpath}/${robot2_room2})
 ;same = n,Playback(${globalSoundpath}/${robot2_room3})
 ;same = n,Playback(${globalSoundpath}/${robot2_room4})
 ;same = n,playback(${globalSoundpath}/box_not_closed2)
 ;same = n,Hangup()


 ;400, delivery over time
exten = 400,1,Answer()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(robot2_subfunction=4)
 same = n,WaitExten(1)

; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)

; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)

; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)

; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; 機器人任務超時, 請按0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,WaitExten(1)
; mission overtime, please press 0
 same = n,Background(${globalSoundpath}/devilver_overtime_reminder)
;
 same = n,Hangup()


;exten = 3,1,Answer()
 ;same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 ;same = n,wait(1)
 ;same = n,NoOp(${globalSoundpath})
 ;same = n,wait(1)
 ;same = n,NoOp(Robot2 pickup)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,wait(1)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,wait(1)
 ;same = n,playback(${globalSoundpath}/box_not_closed1)
 ;same = n,Hangup()

exten = 0,1,Answer()
 same = 2,GotoIf($["${robot2_subfunction}" = "1"]? 6)
 same = 3,GotoIf($["${robot2_subfunction}" = "2"]? 7)
 same = 4,GotoIf($["${robot2_subfunction}" = "3"]? 8)
 same = 5,GotoIf($["${robot2_subfunction}" = "4"]? 9)
 ;same = 3,Goto(subfunction,1,1)
 ;context,exten,priority
 same = 6,Goto(robot2_subfunctions,1,1)
 same = 7,Goto(robot2_subfunctions,2,1)
 same = 8,Goto(robot2_subfunctions,3,1)
 same = 9,Goto(robot2_subfunctions,4,1)
 same = n,Hangup()


[robot1_subfunctions]

exten = 1,1,Answer()
 same = n,NoOp(subfuction 1)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 same = n,Set(robot1_pw1=${pw1:0:1})
 same = n,Set(robot1_pw2=${pw1:1:1})
 same = n,Set(robot1_pw3=${pw1:2:1})
 same = n,Set(robot1_pw4=${pw1:3:1})
;Robot1 picup
 same = n,NoOp(Robot1 pickup)
; 親愛的貴賓您好我是和寶 您的行李已經送到房口囉 快來領取吧
 same = n,Playback(${soundpath}/tts1)
 same = n,WaitExten(1)
; 您設定的密碼為
 same = n,Playback(${soundpath}/pwPrompt)
 same = n,Playback(${soundpath}/${robot1_pw1})
 same = n,Playback(${soundpath}/${robot1_pw2})
 same = n,Playback(${soundpath}/${robot1_pw3})
 same = n,Playback(${soundpath}/${robot1_pw4})
 same = n,WaitExten(3)

; Dear guest, my name is HeBao. I just finished delivering your luggage. Please come and get it by door
 same = n,Playback(${soundpath_en}/tts1)
 same = n,WaitExten(1)
; Your password is
 same = n,Playback(${soundpath_en}/pwPrompt)
 same = n,Playback(${soundpath_en}/${robot1_pw1})
 same = n,Playback(${soundpath_en}/${robot1_pw2})
 same = n,Playback(${soundpath_en}/${robot1_pw3})
 same = n,Playback(${soundpath_en}/${robot1_pw4})
 same = n,WaitExten(3)
;
 same = n,Hangup()

exten = 2,1,Answer()
 same = n,NoOp(subfuction 2)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 same = n,NoOp(Robot1 pickup)
; same = n,Wait(1)
; // 設定樓層, 目前房號 目的地YYYY號房
 same = n,Set(robot1_cur_room1=${robot1_currentRoomId:0:1})
 same = n,Set(robot1_cur_room2=${robot1_currentRoomId:1:1})
 same = n,Set(robot1_cur_room3=${robot1_currentRoomId:2:1})
 same = n,Set(robot1_cur_room4=${robot1_currentRoomId:3:1})
 same = n,Set(floor=${robot1_currentRoomId:1:1})
; 機器人在X樓 
 same = n,Playback(${soundpath}/robot_is_at)
 same = n,Playback(${soundpath}/${floor})
 same = n,Playback(${soundpath}/floor)
; XXXX號房
; same = n,Playback(${soundpath}/${d1})
 same = n,Playback(${soundpath}/${robot1_cur_room2})
 same = n,Playback(${soundpath}/${robot1_cur_room3})
 same = n,Playback(${soundpath}/${robot1_cur_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
; // 設定目的房號
 same = n,Set(robot1_tar_room1=${robot1_targetRoomId:0:1})
 same = n,Set(robot1_tar_room2=${robot1_targetRoomId:1:1})
 same = n,Set(robot1_tar_room3=${robot1_targetRoomId:2:1})
 same = n,Set(robot1_tar_room4=${robot1_targetRoomId:3:1})
; 目的地YYYY房號
 same = n,Playback(${soundpath}/target)
; same = n,Playback(${soundpath}/${d1})
 same = n,Playback(${soundpath}/${robot1_tar_room2})
 same = n,Playback(${soundpath}/${robot1_tar_room3})
 same = n,Playback(${soundpath}/${robot1_tar_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
;
; 請通知客房阿姨移動工作車，謝謝
 same = n,Playback(${soundpath}/plz_notice_to_remove_car)
 same = n,Wait(3)
 same = n,Hangup()

;box not closed
exten = 3,1,Answer()
 same = n,NoOp(subfuction 3)
 same = n,NoOp(Robot1 pickup)
 same = n,wait(1)
 same = n,wait(1)
 same = n,Set(robot1_roomId1=${robot1_roomId:0:1})
 same = n,Set(robot1_roomId2=${robot1_roomId:1:1})
 same = n,Set(robot1_roomId3=${robot1_roomId:2:1})
 same = n,Set(robot1_roomId4=${robot1_roomId:3:1})
 ;;機器人箱體未關閉，請派人到機器人所在位置 
 same = n,playback(${globalSoundpath}/box_not_closed1)
 same = n,Playback(${globalSoundpath}/${robot1_roomId1})
 same = n,Playback(${globalSoundpath}/${robot1_roomId2})
 same = n,Playback(${globalSoundpath}/${robot1_roomId3})
 same = n,Playback(${globalSoundpath}/${robot1_roomId4})
 ;關閉箱體
 same = n,playback(${globalSoundpath}/box_not_closed2)
 same = n,Hangup()

;delivery_overtime
exten = 4,1,Answer()
 same = n,NoOp(subfuction 4)
 same = n,wait(1)
 same = n,NoOp(Robot1 pickup)
 ;親愛的貴賓您好，我是和寶，目前電梯使用人潮眾多，運送時間較長，請稍後，運送任務抵達後將再電話通知您
 same = n,playback(${globalSoundpath}/devilver_overtime_msg)
 same = n,wait(1)
 same = n,playback(${globalSoundpath}/devilver_overtime_msg)
 same = n,wait(1)
 same = n,playback(${globalSoundpath}/devilver_overtime_msg)
 same = n,Hangup()

[robot2_subfunctions]

;delivery_call
exten = 1,1,Answer()
 same = n,NoOp(robot2 subfuction 1)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 same = n,Set(robot2_pw1=${pw2:0:1})
 same = n,Set(robot2_pw2=${pw2:1:1})
 same = n,Set(robot2_pw3=${pw2:2:1})
 same = n,Set(robot2_pw4=${pw2:3:1})
;Robot1 picup
 same = n,NoOp(Robot2 pickup)
; 親愛的貴賓您好我是和寶 您的行李已經送到房口囉 快來領取吧
 same = n,Playback(${soundpath}/tts1)
 same = n,WaitExten(1)
; 您設定的密碼為
 same = n,Playback(${soundpath}/pwPrompt)
 same = n,Playback(${soundpath}/${robot2_pw1})
 same = n,Playback(${soundpath}/${robot2_pw2})
 same = n,Playback(${soundpath}/${robot2_pw3})
 same = n,Playback(${soundpath}/${robot2_pw4})
 same = n,WaitExten(3)

; Dear guest, my name is HeBao. I just finished delivering your luggage. Please come and get it by door
 same = n,Playback(${soundpath_en}/tts1)
 same = n,WaitExten(1)
; Your password is
 same = n,Playback(${soundpath_en}/pwPrompt)
 same = n,Playback(${soundpath_en}/${robot2_pw1})
 same = n,Playback(${soundpath_en}/${robot2_pw2})
 same = n,Playback(${soundpath_en}/${robot2_pw3})
 same = n,Playback(${soundpath_en}/${robot2_pw4})
 same = n,WaitExten(3)
;
 same = n,Hangup()

;remove_call
exten = 2,1,Answer()
 same = n,NoOp(robot2 subfuction 2)
 same = n,Set(soundpath=/home/advrobot/robocall/sounds)
 same = n,Set(soundpath_en=/home/advrobot/robocall/sounds_en)
 same = n,NoOp(Robot2 pickup)
; same = n,Wait(1)
; // 設定樓層, 目前房號 目的地YYYY號房
 same = n,Set(robot2_cur_room1=${robot2_currentRoomId:0:1})
 same = n,Set(robot2_cur_room2=${robot2_currentRoomId:1:1})
 same = n,Set(robot2_cur_room3=${robot2_currentRoomId:2:1})
 same = n,Set(robot2_cur_room4=${robot2_currentRoomId:3:1})
 same = n,Set(floor=${robot2_currentRoomId:1:1})
; 機器人在X樓 
 same = n,Playback(${soundpath}/robot_is_at)
 same = n,Playback(${soundpath}/${floor})
 same = n,Playback(${soundpath}/floor)
; XXXX號房
; same = n,Playback(${soundpath}/${d1})
 same = n,Playback(${soundpath}/${robot2_cur_room2})
 same = n,Playback(${soundpath}/${robot2_cur_room3})
 same = n,Playback(${soundpath}/${robot2_cur_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
; // 設定目的房號
 same = n,Set(robot2_tar_room1=${robot2_targetRoomId:0:1})
 same = n,Set(robot2_tar_room2=${robot2_targetRoomId:1:1})
 same = n,Set(robot2_tar_room3=${robot2_targetRoomId:2:1})
 same = n,Set(robot2_tar_room4=${robot2_targetRoomId:3:1})
; 目的地YYYY房號
 same = n,Playback(${soundpath}/target)
; same = n,Playback(${soundpath}/${d1})
 same = n,Playback(${soundpath}/${robot2_tar_room2})
 same = n,Playback(${soundpath}/${robot2_tar_room3})
 same = n,Playback(${soundpath}/${robot2_tar_room4})
; same = n,Playback(${soundpath}/roomId)
; same = n,Wait(1)
;
; 請通知客房阿姨移動工作車，謝謝
 same = n,Playback(${soundpath}/plz_notice_to_remove_car)
 same = n,Wait(3)
 same = n,Hangup()

;box not closed
exten = 3,1,Answer()
 same = n,NoOp(robot2 subfuction 3)
 same = n,NoOp(Robot2 pickup)
 same = n,wait(1)
 same = n,Set(robot2_roomId1=${robot2_roomId:0:1})
 same = n,Set(robot2_roomId2=${robot2_roomId:1:1})
 same = n,Set(robot2_roomId3=${robot2_roomId:2:1})
 same = n,Set(robot2_roomId4=${robot2_roomId:3:1})
 ;機器人箱體未關閉，請派人到機器人所在位置 
 same = n,playback(${globalSoundpath}/box_not_closed1)
 same = n,Playback(${globalSoundpath}/${robot2_roomId1})
 same = n,Playback(${globalSoundpath}/${robot2_roomId2})
 same = n,Playback(${globalSoundpath}/${robot2_roomId3})
 same = n,Playback(${globalSoundpath}/${robot2_roomId4})
 ;關閉箱體
 same = n,playback(${globalSoundpath}/box_not_closed2)
 same = n,Hangup()

;delivery_overtime
exten = 4,1,Answer()
 same = n,NoOp(robot2 subfuction 4)
 same = n,wait(1)
 same = n,NoOp(Robot2 pickup)
 ;親愛的貴賓您好，我是和寶，目前電梯使用人潮眾多，運送時間較長，請稍後，運送任務抵達後將再電話通知您
 same = n,playback(${globalSoundpath}/devilver_overtime_msg)
 same = n,wait(1)
 same = n,playback(${globalSoundpath}/devilver_overtime_msg)
 same = n,wait(1)
 same = n,playback(${globalSoundpath}/devilver_overtime_msg)
 same = n,Hangup()